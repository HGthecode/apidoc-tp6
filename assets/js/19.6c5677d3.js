(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{375:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"功能配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能配置"}},[t._v("#")]),t._v(" 功能配置")]),t._v(" "),a("h2",{attrs:{id:"多版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多版本"}},[t._v("#")]),t._v(" 多版本")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),a("p",[a("code",[t._v("v2.1.0")]),t._v("版本已删除"),a("code",[t._v("versions")]),t._v(" 的配置项，请改为用"),a("code",[t._v("apps")]),t._v("配置"),a("RouterLink",{attrs:{to:"/v2/config/function.html#多应用-多版本"}},[t._v("多应用/多版本")])],1)]),t._v(" "),a("p",[t._v("在单应用中，我们通常使用这样的目录接口来实现多版本接口开发")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("app\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— controller\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v1\n        BaseDemo.php\n        CrudDemo.php\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v2\n        BaseDemo.php\n        CrudDemo.php\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— model\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("p",[t._v("根据以上项目的目录结构，在配置文件"),a("code",[t._v("/config/apidoc.php")]),t._v("中的 versions 参数中配置你的可选版本，如下")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置可选版本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'versions'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'V1.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'folder'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\controller\\v1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'V2.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'folder'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\controller\\v2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("如配置了 "),a("code",[t._v("controllers")]),t._v(" 生成文档的控制器目录调整为：")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//生成文档的控制器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'controllers'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'BaseDemo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'CrudDemo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("folder")]),t._v(" "),a("p",[t._v("多版本配置的关键点在于 folder 目录的配置，请根据你的项目结构调整，\n其原理为 当前版本的folder + 控制器 来生成接口文档")])]),t._v(" "),a("h2",{attrs:{id:"多应用-多版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多应用-多版本"}},[t._v("#")]),t._v(" 多应用/多版本")]),t._v(" "),a("blockquote",[a("p",[t._v(">=2.1.0版本")])]),t._v(" "),a("p",[t._v("由于在各种项目开发中，有多种情况，如"),a("code",[t._v("单应用多版本")]),t._v("、"),a("code",[t._v("多应用无版本")]),t._v("、"),a("code",[t._v("多应用多版本")]),t._v("等开发场景与项目目录，所以将多应用/多版本统一在"),a("code",[t._v("apps")]),t._v("中配置实现。")]),t._v(" "),a("h4",{attrs:{id:"举例一个多应用多版本的实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例一个多应用多版本的实现"}},[t._v("#")]),t._v(" 举例一个多应用多版本的实现：")]),t._v(" "),a("p",[t._v("假设一个admin应用无版本，demo应用有多个版本，其项目项目目录如下")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("app\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— admin\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— controller\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— Index.php\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— route\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— demo\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— controller\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v1\n            BaseDemo.php\n            CrudDemo.php\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v2\n            BaseDemo.php\n            CrudDemo.php\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— model\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("p",[t._v("在配置文件"),a("code",[t._v("/config/apidoc.php")]),t._v("中的 apps 参数中配置如下")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'apps'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'后台管理'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\admin\\controller'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'folder'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'演示示例'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'folder'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'demo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'items'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'V1.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\demo\\controller\\v1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'folder'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'v1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'V2.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\demo\\controller\\v2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'folder'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'v2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("得到如下效果\n"),a("img",{staticClass:"img-view",staticStyle:{width:"100%"},attrs:{src:t.$withBase("/images/v2/apidoc-demo-apps.png"),alt:"apidoc-demo-apps"}})]),t._v(" "),a("h2",{attrs:{id:"控制器分组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#控制器分组"}},[t._v("#")]),t._v(" 控制器分组")]),t._v(" "),a("p",[t._v("可通过控制器分组实现将多模块的控制器进行分组")]),t._v(" "),a("p",[t._v("1、配置文件"),a("code",[t._v("/config/apidoc.php")]),t._v("中的 groups 配置分组列表：")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置控制器分组")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'groups'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'基础模块'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'base'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'示例模块'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'demo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("2、在对应控制器注释中，加入 "),a("code",[t._v("@group")]),t._v(" 来指定该控制器所属分类的 name")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("controller")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("hg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("apidoc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("annotation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" Apidoc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @Apidoc\\title("基础示例")\n * @Apidoc\\group("base")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApiDocTest")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n")])])]),a("h2",{attrs:{id:"密码验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密码验证"}},[t._v("#")]),t._v(" 密码验证")]),t._v(" "),a("p",[t._v("配置文件"),a("code",[t._v("/config/apidoc.php")]),t._v("中的 auth 设置如下，即可在访问文档页面时需输入密码访问：")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 权限认证配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'auth'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否启用密码验证")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'enable'")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 验证密码")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'password'")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 密码加密盐")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'secret_key'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"apidoc#hg_code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("h2",{attrs:{id:"文档缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档缓存"}},[t._v("#")]),t._v(" 文档缓存")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("建议")]),t._v(" "),a("p",[t._v("开发环境中关闭缓存，可方便实时修改查看效果，提升开发效率。正式发布后可开启。")])]),t._v(" "),a("p",[t._v("开启缓存后，每次访问接口文档则直接使用缓存数据展示文档，大大提升访问速度，也可在页面右上角切换历史文档。\n但当修改了接口注释后，需手动点击接口文档页面右上角的 "),a("code",[t._v("ReLoad")]),t._v(" 按钮生成新的文档数据。")]),t._v(" "),a("p",[t._v("配置文件"),a("code",[t._v("/config/apidoc.php")]),t._v("中的"),a("code",[t._v("cache")]),t._v("设置为如下：")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 缓存配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'cache'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否开启缓存")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'enable'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 缓存文件路径")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'../runtime/apidoc/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否显示更新缓存按钮")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'reload'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最大缓存文件数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'max'")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//最大缓存数量")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("缓存的文件默认生成在 "),a("code",[t._v("/runtime/apidoc/")]),t._v("目录下，如需删除缓存记录，可直接删除该目录下的相应文件即可")]),t._v(" "),a("h2",{attrs:{id:"markdown-文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#markdown-文档"}},[t._v("#")]),t._v(" Markdown 文档")]),t._v(" "),a("p",[t._v("1、根目录下创建"),a("code",[t._v("docs")]),t._v("（你也可以是别的）目录，并创建md文档文件，如下")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("app\nconfig\ndocs\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— Use.md\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— V1.0\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— HttpStatus.md\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— HttpCode.md\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— V2.0\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— HttpStatus.md\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— HttpCode.md \n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("p",[t._v("2、配置文档菜单")]),t._v(" "),a("blockquote",[a("p",[t._v("可使用 "),a("code",[t._v("{:version}")]),t._v(" 做多版本区分")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[t._v("// config/apidoc.php\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// markdown 文档")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'docs'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'menu_title'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'开发文档'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'menus'")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'使用说明'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'docs/Use'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'HTTP响应码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'items'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'status错误码说明'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'docs/{:version}/HttpStatus'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'code错误码说明'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'docs/{:version}/HttpCode'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),a("img",{staticClass:"img-view",staticStyle:{width:"100%"},attrs:{src:t.$withBase("/images/v2/apidoc-demo-md.png"),alt:"apidoc-demo-md"}}),t._v(" "),a("h2",{attrs:{id:"一键生成crud"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一键生成crud"}},[t._v("#")]),t._v(" 一键生成CRUD")]),t._v(" "),a("p",[t._v("快速生成CRUD功能由 系统配置+模板+可视化页面配置来实现。为了灵活适应各种项目结构与实现方式，需做好系统配置与模板编写。")]),t._v(" "),a("p",[t._v("下面将举例一个多应用多版本的实现：")]),t._v(" "),a("blockquote",[a("p",[t._v("假设一个admin应用无版本，demo应用有多个版本，其项目项目目录如下")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("app\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— admin\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— controller\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— Index.php\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— validate\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— demo\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— controller\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v1\n            BaseDemo.php\n            CrudDemo.php\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v2\n            BaseDemo.php\n            CrudDemo.php\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— validate\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— model\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("h3",{attrs:{id:"_1、系统配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、系统配置"}},[t._v("#")]),t._v(" 1、系统配置")]),t._v(" "),a("p",[t._v("配置文件"),a("code",[t._v("/config/apidoc.php")]),t._v("中，根据你的项目结构设置"),a("RouterLink",{attrs:{to:"/v2/config/#crud"}},[t._v("crud参数")])],1),t._v(" "),a("blockquote",[a("p",[t._v("多应用/多版本需先配置 "),a("RouterLink",{attrs:{to:"/v2/config/#apps"}},[t._v("apps")])],1)]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'crud'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成控制器配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'controller'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\${app[0].folder}\\controller\\${app[1].folder}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'../template/controller'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义的文件生成配置，你也可以像这样添加更多配置项，来生成你所需的文件。当然你的项目如果很简单，没有逻辑层删除此项配置也是可以的")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'service'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\${app[0].folder}\\services'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'../template/service'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成模型配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'model'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\model'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'../template/model'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'default_fields'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'field'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'desc'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'唯一id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'int'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'length'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'default'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'not_null'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'main_key'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'incremental'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'validate'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'query'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'list'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'detail'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'add'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'edit'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'fields_types'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"int"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"tinyint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"float"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"decimal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"char"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"varchar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"point"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成验证器文件配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'validate'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\${app[0].folder}\\validate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'../template/validate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'rules'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'必填'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'rule'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'require'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'缺少必要参数${field}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'数字'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'rule'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'${field}字段类型为数字'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'年龄'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'rule'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'number|between:1,120'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'${field}.number'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'${field}${desc}字段类型为数字'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'${field}.between'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'${field}只能在1-120之间'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成路由")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'route'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'${app[0].folder}\\route\\${app[0].folder}.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'../template/route_${app[0].folder}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n")])])]),a("p",[t._v("通过如上配置，我们就可以看到页面上（搜索框后面）有一个 + 号按钮，点击弹出可视化配置窗口，如下")]),t._v(" "),a("img",{staticClass:"img-view",staticStyle:{width:"100%"},attrs:{src:t.$withBase("/images/v2/apidoc-config_crud.png"),alt:"apidoc-config_crud"}}),t._v(" "),a("h3",{attrs:{id:"_2、编写模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、编写模板"}},[t._v("#")]),t._v(" 2、编写模板")]),t._v(" "),a("p",[t._v("在项目跟目录创建 "),a("code",[t._v("template")]),t._v("文件夹，并创建配置中的模板文件 "),a("code",[t._v("controller.txt")]),t._v("、"),a("code",[t._v("service.txt")]),t._v("、"),a("code",[t._v("model.txt")]),t._v("、"),a("code",[t._v("validate.txt")]),t._v("、"),a("code",[t._v("route_admn.txt")]),t._v("、"),a("code",[t._v("route_demo.txt")]),t._v("。")]),t._v(" "),a("p",[t._v("模板示例可参考 "),a("a",{attrs:{href:""}},[t._v("模板文件示例")]),t._v(" ，这里就不贴出来了，这里说说如何编写模板，相信你很快就能上手。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("要领")]),t._v(" "),a("p",[t._v("1、首先自己在项目中实现一个标准通用的Crud。")]),t._v(" "),a("p",[t._v("2、然后把这些文件内容拷贝在对应的"),a("code",[t._v(".txt")]),t._v("模板文件中。")]),t._v(" "),a("p",[t._v("3、用下表变量替换模板中的参数。")])]),t._v(" "),a("h4",{attrs:{id:"模板变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板变量"}},[t._v("#")]),t._v(" 模板变量")]),t._v(" "),a("p",[t._v("在模板中可以使用如下变量，使用方法"),a("code",[t._v("${变量名}")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("变量名")]),t._v(" "),a("th",[t._v("示例值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("title")]),t._v(" "),a("td",[t._v("测试CRUD")]),t._v(" "),a("td",[t._v("页面填入的控制器标题")])]),t._v(" "),a("tr",[a("td",[t._v("controller.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的控制器文件名")])]),t._v(" "),a("tr",[a("td",[t._v("controller.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\controller")]),t._v(" "),a("td",[t._v("控制器命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("controller.use_alias")]),t._v(" "),a("td",[t._v("TestCrudController")]),t._v(" "),a("td",[t._v("控制器别名")])]),t._v(" "),a("tr",[a("td",[t._v("controller.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\controller\\TestCrud")]),t._v(" "),a("td",[t._v("控制器use地址")])]),t._v(" "),a("tr",[a("td",[t._v("list.field")]),t._v(" "),a("td",[t._v("id,name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的列表显示字段")])]),t._v(" "),a("tr",[a("td",[t._v("list.withoutField")]),t._v(" "),a("td",[t._v("update_time,delete_time")]),t._v(" "),a("td",[t._v("列表显示排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("detail.field")]),t._v(" "),a("td",[t._v("id,name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的明细显示字段")])]),t._v(" "),a("tr",[a("td",[t._v("detail.withoutField")]),t._v(" "),a("td",[t._v("update_time,delete_time")]),t._v(" "),a("td",[t._v("明细显示排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("add.field")]),t._v(" "),a("td",[t._v("name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的新增字段")])]),t._v(" "),a("tr",[a("td",[t._v("add.withoutField")]),t._v(" "),a("td",[t._v("id,update_time,delete_time")]),t._v(" "),a("td",[t._v("新增提交排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("edit.field")]),t._v(" "),a("td",[t._v("id,name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的编辑显示字段")])]),t._v(" "),a("tr",[a("td",[t._v("edit.withoutField")]),t._v(" "),a("td",[t._v("update_time,delete_time")]),t._v(" "),a("td",[t._v("编辑显示排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("query.annotation")]),t._v(" "),a("td",[t._v('@Apidoc\\Param("name",type="string",desc="姓名")')]),t._v(" "),a("td",[t._v("根据页面勾选查询的字段生成的注释")])]),t._v(" "),a("tr",[a("td",[t._v("query.where")]),t._v(" "),a("td",[t._v("$where=[]; if(!empty($param['name'])){ $where[] = ['name','=',$param['name']]; }")]),t._v(" "),a("td",[t._v("根据页面勾选的查询字段生成的查询条件")])]),t._v(" "),a("tr",[a("td",[t._v("api_class_name")]),t._v(" "),a("td",[t._v("testCrud")]),t._v(" "),a("td",[t._v("api的url所用的控制器名称（其实就是小写开头的控制器名）")])]),t._v(" "),a("tr",[a("td",[t._v("api_group")]),t._v(" "),a("td",[t._v("app\\admin\\controller\\TestCrud")]),t._v(" "),a("td",[t._v("控制器分组所选的分组name")])]),t._v(" "),a("tr",[a("td",[t._v("api_url")]),t._v(" "),a("td",[t._v("/admin/testCrud")]),t._v(" "),a("td",[t._v("控制器api访问的url")])]),t._v(" "),a("tr",[a("td",[t._v("main_key.field")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("页面配置的数据表主键的字段名")])]),t._v(" "),a("tr",[a("td",[t._v("main_key.type")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("页面配置的数据表主键的字段类型")])]),t._v(" "),a("tr",[a("td",[t._v("main_key.desc")]),t._v(" "),a("td",[t._v("唯一id")]),t._v(" "),a("td",[t._v("页面配置的数据表主键的字段说明注释")])]),t._v(" "),a("tr",[a("td",[t._v("model.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的模型文件名")])]),t._v(" "),a("tr",[a("td",[t._v("model.namespace")]),t._v(" "),a("td",[t._v("app\\model")]),t._v(" "),a("td",[t._v("模型命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("model.use_alias")]),t._v(" "),a("td",[t._v("TestCrudModel")]),t._v(" "),a("td",[t._v("模型别名")])]),t._v(" "),a("tr",[a("td",[t._v("model.use_path")]),t._v(" "),a("td",[t._v("app\\model\\TestCrud")]),t._v(" "),a("td",[t._v("模型use地址")])]),t._v(" "),a("tr",[a("td",[t._v("validate.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的验证器文件名")])]),t._v(" "),a("tr",[a("td",[t._v("validate.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\validate")]),t._v(" "),a("td",[t._v("验证器命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("validate.use_alias")]),t._v(" "),a("td",[t._v("TestCrudValidate")]),t._v(" "),a("td",[t._v("验证器别名")])]),t._v(" "),a("tr",[a("td",[t._v("validate.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\validate\\TestCrud")]),t._v(" "),a("td",[t._v("验证器use地址")])]),t._v(" "),a("tr",[a("td",[t._v("validate.rule")]),t._v(" "),a("td",[t._v("[ 'id' => 'require','name'=>'require']")]),t._v(" "),a("td",[t._v("页面字段配置验证的验证规则")])]),t._v(" "),a("tr",[a("td",[t._v("validate.message")]),t._v(" "),a("td",[t._v("['id' =>'id不可为空','name'=>'name不可为空']")]),t._v(" "),a("td",[t._v("验证规则的提示内容")])]),t._v(" "),a("tr",[a("td",[t._v("validate.scene.add")]),t._v(" "),a("td",[t._v('["name","sex","age"]')]),t._v(" "),a("td",[t._v("新增场景验证的字段")])]),t._v(" "),a("tr",[a("td",[t._v("validate.scene.edit")]),t._v(" "),a("td",[t._v('["id","name","sex","age"]')]),t._v(" "),a("td",[t._v("编辑场景验证的字段")])]),t._v(" "),a("tr",[a("td",[t._v("validate.scene.delete")]),t._v(" "),a("td",[t._v('["id"]')]),t._v(" "),a("td",[t._v("删除场景验证的字段")])]),t._v(" "),a("tr",[a("td",[t._v("service.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的逻辑层（自定义的）文件名")])]),t._v(" "),a("tr",[a("td",[t._v("service.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\service")]),t._v(" "),a("td",[t._v("逻辑层（自定义的）命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("service.use_alias")]),t._v(" "),a("td",[t._v("TestCrudservice")]),t._v(" "),a("td",[t._v("逻辑层（自定义的）别名")])]),t._v(" "),a("tr",[a("td",[t._v("service.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\service\\TestCrud")]),t._v(" "),a("td",[t._v("逻辑层（自定义的）use地址")])])])]),t._v(" "),a("h4",{attrs:{id:"自定义文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义文件"}},[t._v("#")]),t._v(" 自定义文件")]),t._v(" "),a("p",[t._v("如果你的项目需要更多层文件来实现Crud，你只需要在配置文件"),a("code",[t._v("config/apidoc.php")]),t._v("的"),a("code",[t._v("crud")]),t._v("配置项中加入你的配置，如下")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'crud'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义的文件生成配置，你也可以像这样添加更多配置项，来生成你所需的文件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'myTest'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'app\\${app[0].folder}\\myTest'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'../template/myTest'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("加入配置后，页面将会多出一个myTest的文件名输入项，并在创建Crud时根据此配置的模板生成文件。同时模板变量里也会多出以下几个变量")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("变量名")]),t._v(" "),a("th",[t._v("示例值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("myTest.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的自定义的文件名")])]),t._v(" "),a("tr",[a("td",[t._v("myTest.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\myTest")]),t._v(" "),a("td",[t._v("自定义文件的命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("myTest.use_alias")]),t._v(" "),a("td",[t._v("TestCrudmyTest")]),t._v(" "),a("td",[t._v("自定义文件的别名")])]),t._v(" "),a("tr",[a("td",[t._v("myTest.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\myTest\\TestCrud")]),t._v(" "),a("td",[t._v("自定义文件的use地址")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);