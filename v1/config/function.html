<!DOCTYPE html>
<html lang="V1">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>功能配置 | ThinkPHP-ApiDoc</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="基于ThinkPHP根据注释自动生成API文档的插件">
    
    <link rel="preload" href="/thinkphp-apidoc/assets/css/0.styles.f980f7ac.css" as="style"><link rel="preload" href="/thinkphp-apidoc/assets/js/app.f3976061.js" as="script"><link rel="preload" href="/thinkphp-apidoc/assets/js/2.4da65e27.js" as="script"><link rel="preload" href="/thinkphp-apidoc/assets/js/11.42502c16.js" as="script"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/10.29ddc1b5.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/12.61bd1363.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/13.80c9b20f.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/14.450b9695.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/15.0f1eb16a.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/16.21e9fee7.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/17.b2deb354.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/18.d4bd8ba0.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/19.a88317f5.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/20.bde44921.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/21.b35cb273.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/22.bdcd9ccf.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/23.a0768f94.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/24.35b5e3ad.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/25.9054591b.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/3.ecb299b1.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/4.b3d7061b.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/5.fe69d77d.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/6.73c063ed.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/7.b4e343ac.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/8.e3e72a50.js"><link rel="prefetch" href="/thinkphp-apidoc/assets/js/9.fd734284.js">
    <link rel="stylesheet" href="/thinkphp-apidoc/assets/css/0.styles.f980f7ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/thinkphp-apidoc/v1/" class="home-link router-link-active"><img src="/thinkphp-apidoc/images/logo.png" alt="ThinkPHP-ApiDoc" class="logo"> <span class="site-name can-hide">ThinkPHP-ApiDoc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/thinkphp-apidoc/v1/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安装" class="dropdown-title"><span class="title">安装</span> <span class="arrow down"></span></button> <button type="button" aria-label="安装" class="mobile-dropdown-title"><span class="title">安装</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/v1/install/" class="nav-link">
  安装
</a></li><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/v1/changelog/" class="nav-link">
  更新日志
</a></li></ul></div></div><div class="nav-item"><a href="/thinkphp-apidoc/v1/config/" class="nav-link router-link-active">
  配置
</a></div><div class="nav-item"><a href="/thinkphp-apidoc/v1/use/" class="nav-link">
  使用
</a></div><div class="nav-item"><a href="/thinkphp-apidoc/v1/sponsor/" class="nav-link">
  支持
</a></div><div class="nav-item"><a href="https://apidoc.demo.hg-code.com/apidoc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  演示
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/" class="nav-link">
  V2
</a></li><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/v1/config/function.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  V1
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/thinkphp-apidoc/v1/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安装" class="dropdown-title"><span class="title">安装</span> <span class="arrow down"></span></button> <button type="button" aria-label="安装" class="mobile-dropdown-title"><span class="title">安装</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/v1/install/" class="nav-link">
  安装
</a></li><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/v1/changelog/" class="nav-link">
  更新日志
</a></li></ul></div></div><div class="nav-item"><a href="/thinkphp-apidoc/v1/config/" class="nav-link router-link-active">
  配置
</a></div><div class="nav-item"><a href="/thinkphp-apidoc/v1/use/" class="nav-link">
  使用
</a></div><div class="nav-item"><a href="/thinkphp-apidoc/v1/sponsor/" class="nav-link">
  支持
</a></div><div class="nav-item"><a href="https://apidoc.demo.hg-code.com/apidoc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  演示
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/" class="nav-link">
  V2
</a></li><li class="dropdown-item"><!----> <a href="/thinkphp-apidoc/v1/config/function.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  V1
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/thinkphp-apidoc/v1/config/" aria-current="page" class="sidebar-link">配置参数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#title" class="sidebar-link">title</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#desc" class="sidebar-link">desc</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#copyright" class="sidebar-link">copyright</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#controllers" class="sidebar-link">controllers</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#versions" class="sidebar-link">versions</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#groups" class="sidebar-link">groups</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#with-cache" class="sidebar-link">with_cache</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#responses" class="sidebar-link">responses</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#global-auth-key" class="sidebar-link">globalauthkey</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#auth" class="sidebar-link">auth</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#definitions" class="sidebar-link">definitions</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/#filter-method" class="sidebar-link">filter_method</a></li></ul></li><li><a href="/thinkphp-apidoc/v1/config/function.html" aria-current="page" class="active sidebar-link">功能配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/function.html#多版本" class="sidebar-link">多版本</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/function.html#控制器分组" class="sidebar-link">控制器分组</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/function.html#密码验证" class="sidebar-link">密码验证</a></li><li class="sidebar-sub-header"><a href="/thinkphp-apidoc/v1/config/function.html#文档缓存" class="sidebar-link">文档缓存</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="功能配置"><a href="#功能配置" class="header-anchor">#</a> 功能配置</h1> <h2 id="多版本"><a href="#多版本" class="header-anchor">#</a> 多版本</h2> <p>在单应用中，我们通常使用这样的目录接口来实现多版本接口开发</p> <div class="language-sh extra-class"><pre class="language-sh"><code>app
 <span class="token operator">|</span>—— controller
    <span class="token operator">|</span>—— v1
        BaseDemo.php
        CrudDemo.php
        <span class="token punctuation">..</span>.
    <span class="token operator">|</span>—— v2
        BaseDemo.php
        CrudDemo.php
        <span class="token punctuation">..</span>.
 <span class="token operator">|</span>—— model
 <span class="token punctuation">..</span>.
</code></pre></div><p>根据以上项目的目录结构，在配置文件<code>/config/apidoc.php</code>中的 versions 参数中配置你的可选版本，如下</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// /config/apidoc.php</span>
<span class="token comment">// 设置可选版本</span>
<span class="token single-quoted-string string">'versions'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'V1.0'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'folder'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'controller\\v1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'V2.0'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'folder'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'controller\\v2'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>配置文件<code>/config/apidoc.php</code>中的 controllers 生成文档的控制器目录调整为：</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// /config/apidoc.php</span>
<span class="token comment">//生成文档的控制器</span>
<span class="token single-quoted-string string">'controllers'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'BaseDemo'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'CrudDemo'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">folder</p> <p>多版本配置的关键点在于 folder 目录的配置，请根据你的项目结构调整，
其原理为 app文件夹开始， 当前版本的folder + 配置的controllers中的控制器 来生成接口文档</p></div> <h2 id="控制器分组"><a href="#控制器分组" class="header-anchor">#</a> 控制器分组</h2> <blockquote><p>支持版本 &gt;= v1.1.1</p></blockquote> <p>可通过控制器分组实现将多模块的控制器进行分组</p> <p>1、配置文件<code>/config/apidoc.php</code>中的 groups 配置分组列表：</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// /config/apidoc.php</span>
<span class="token comment">//设置控制器分组</span>
<span class="token single-quoted-string string">'groups'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'基础模块'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'name'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'base'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'示例模块'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'name'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'demo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>2、在对应控制器注释中，加入 <code>@group</code> 来指定该控制器所属分类的 name</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">namespace</span> <span class="token package">app<span class="token punctuation">\</span>controller</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * @title Api接口文档测试
 * @controller ApiDocTest
 * @group base
 */</span>
<span class="token keyword">class</span> <span class="token class-name">ApiDocTest</span>
<span class="token punctuation">{</span> 
</code></pre></div><h2 id="密码验证"><a href="#密码验证" class="header-anchor">#</a> 密码验证</h2> <p>配置文件<code>/config/apidoc.php</code>中的 auth 设置如下，即可在访问接口文档时需输入密码访问：</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// /config/apidoc.php</span>
<span class="token comment">// 密码验证配置</span>
    <span class="token single-quoted-string string">'auth'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>
    <span class="token comment">// 是否启用密码验证</span>
    <span class="token single-quoted-string string">'with_auth'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token boolean constant">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 验证密码</span>
    <span class="token single-quoted-string string">'auth_password'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token double-quoted-string string">&quot;123456&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="文档缓存"><a href="#文档缓存" class="header-anchor">#</a> 文档缓存</h2> <div class="custom-block warning"><p class="custom-block-title">建议</p> <p>开发环境中关闭缓存，可方便实时修改查看效果，提升开发效率。正式发布后可开启。</p></div> <p>开启缓存后，每次访问接口文档则直接使用缓存数据展示文档，大大提升访问速度，也可在页面右上角切换历史文档。
但当修改了接口注释后，需手动点击接口文档页面右上角的 <code>ReLoad</code> 按钮生成新的文档数据。</p> <p>配置文件<code>/config/apidoc.php</code>中的 with_cache 设置为 <code>true</code></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// /config/apidoc.php</span>
<span class="token comment">// 是否开启缓存</span>
<span class="token single-quoted-string string">'with_cache'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token boolean constant">true</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>缓存的文件生成在 <code>/runtime/apidoc/</code>目录下，如需删除缓存记录，可直接删除该目录下的相应文件即可</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/thinkphp-apidoc/v1/config/" class="prev router-link-active">
        配置参数
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/thinkphp-apidoc/assets/js/app.f3976061.js" defer></script><script src="/thinkphp-apidoc/assets/js/2.4da65e27.js" defer></script><script src="/thinkphp-apidoc/assets/js/11.42502c16.js" defer></script>
  </body>
</html>
